<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="urn:jboss:deployment-structure:1.2 http://www.jboss.org/schema/jbossas/jboss-deployment-structure-1_2.xsd">
	<deployment>
		<exclude-subsystems>
			<subsystem name="resteasy" />
			<subsystem name="jpa" />
			<subsystem name="jaxrs" />
		</exclude-subsystems>
		<exclusions>
			<module name="org.hibernate" />
			<module name="org.hibernate.main" />
			<module name="javax.persistence.api" />
			<module name="org.jboss.as.jpa" />
			<module name="org.apache.log4j" />
			<module name="org.slf4j" />
			<module name="org.slf4j.jcl-over-slf4j" />
			<module name="org.apache.commons.logging" />
			<module name="org.jboss.logmanager" />
			<module name="org.jboss.log4j.logmanager" />
			<module name="javaee.api" />
			<module name="org.apache.cxf" />
		</exclusions>
	</deployment>
	<sub-deployment name="fpsak-web.war">
		<exclude-subsystems>
			<subsystem name="resteasy" />
			<subsystem name="jpa" />
			<subsystem name="jaxrs" />
			<subsystem name="webservices" />
		</exclude-subsystems>
		<exclusions>
			<module name="org.hibernate" />
			<module name="org.hibernate.main" />
			<module name="javax.persistence.api" />
			<module name="org.jboss.as.jpa" />
			<module name="org.apache.log4j" />
			<module name="org.slf4j" />
			<module name="org.slf4j.jcl-over-slf4j" />
			<module name="org.apache.commons.logging" />
			<module name="org.jboss.logmanager" />
			<module name="org.jboss.log4j.logmanager" />
			<module name="org.apache.cxf" />
		</exclusions>
		<dependencies>
			<!-- include everything except javax.ws.rs.api and javax.persistence.api which is provided in the war -->
			<module name="javax.activation.api" export="true" />
			<module name="javax.annotation.api" export="true" />
			<module name="javax.batch.api" export="true" />
			<module name="javax.ejb.api" export="true" />
			<module name="javax.enterprise.api" export="true" />
			<module name="javax.enterprise.concurrent.api" export="true" />
			<module name="javax.inject.api" export="true" />
			<module name="javax.interceptor.api" export="true" />
			<module name="javax.json.api" export="true" />
			<module name="javax.jms.api" export="true" />
			<module name="javax.jws.api" export="true" />
			<module name="javax.mail.api" export="true" />
			<module name="javax.management.j2ee.api" export="true" />

			<!-- <module name="javax.persistence.api" export="true"/> -->
			<module name="javax.resource.api" export="true" />
			<module name="javax.rmi.api" export="true" />
			<module name="javax.security.auth.message.api" export="true" />
			<module name="javax.security.jacc.api" export="true" />
			<module name="javax.servlet.api" export="true" />
			<module name="javax.servlet.jsp.api" export="true" />
			<module name="javax.transaction.api" export="true" />
			<module name="javax.validation.api" export="true" />

			<!-- <module name="javax.ws.rs.api" export="true" services="export"/> -->
			<module name="javax.websocket.api" export="true" />
			<module name="javax.xml.bind.api" export="true" />
			<module name="javax.xml.soap.api" export="true" />
			<module name="javax.xml.ws.api" export="true" />
			<module name="org.glassfish.javax.el" export="true" />

			<!-- TODO WFLY-5966 validate the need for these and remove if not needed. Prior to WFLY-5922 they were exported by javax.ejb.api. -->
			<module name="javax.xml.rpc.api" export="true" />
			<module name="org.omg.api" export="true" />

			<!-- getting access to IBM MQ JmsExceptionDetail classes for client for improved error logging. FÃ¥r NoClassDefFoundError ellers -->
			<module name="deployment.wmq.jmsra.rar" export="true" />
			
			<!-- This one always goes last. -->
			<module name="javax.api" export="true" />

			
		</dependencies>
	</sub-deployment>
</jboss-deployment-structure>
